<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <title>Sistem Fuzzy Prestasi Mahasiswa</title>
    <style>
      body {
        font-family: 'Segoe UI', sans-serif;
        margin: 30px;
        background: #f9fafb;
        color: #333;
      }
      h2 {
        border-bottom: 2px solid #0078d7;
        padding-bottom: 5px;
      }
      .section {
        margin-bottom: 25px;
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
      }
      table {
        border-collapse: collapse;
        width: 100%;
        margin-top: 10px;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
      }
      th {
        background-color: #0078d7;
        color: white;
      }
      input {
        padding: 5px;
        margin-right: 10px;
      }
      button {
        background: #0078d7;
        color: white;
        border: none;
        padding: 8px 14px;
        border-radius: 5px;
        cursor: pointer;
      }
      button:hover {
        background: #005fa3;
      }
    </style>
  </head>
  <body>
    <h1>Sistem Fuzzy Penilaian Prestasi Mahasiswa</h1>

    <!-- Bagian 1: Form Input -->
    <div class="section">
      <h2>Form Input</h2>
      <label>Nama:</label><input type="text" id="nama" /> <label>NIM:</label
      ><input type="text" id="nim" /> <label>IPK:</label
      ><input type="number" id="ipk" step="0.01" min="0" max="4" /> <label>Keaktifan:</label
      ><input type="number" id="aktif" step="1" min="0" max="100" />
      <button onclick="prosesFuzzy()">Proses</button>
    </div>

    <!-- Bagian 2: Fuzzy Set -->
    <div class="section">
      <h2>Fuzzy Set</h2>
      <p><b>Variabel Input:</b></p>
      <ul>
        <li>IPK (0–4): Rendah, Sedang, Tinggi</li>
        <li>Keaktifan (0–100): Rendah, Sedang, Tinggi</li>
        <li>Output: Prestasi (0–100): Rendah, Sedang, Tinggi</li>
      </ul>
    </div>

    <!-- Bagian 3: Fuzzy Rules -->
    <div class="section">
      <h2>Fuzzy Rules</h2>
      <table>
        <tr>
          <th>IPK</th>
          <th>Keaktifan</th>
          <th>Prestasi</th>
        </tr>
        <tr>
          <td>Tinggi</td>
          <td>Tinggi</td>
          <td>Tinggi</td>
        </tr>
        <tr>
          <td>Tinggi</td>
          <td>Sedang</td>
          <td>Tinggi</td>
        </tr>
        <tr>
          <td>Tinggi</td>
          <td>Rendah</td>
          <td>Sedang</td>
        </tr>
        <tr>
          <td>Sedang</td>
          <td>Tinggi</td>
          <td>Tinggi</td>
        </tr>
        <tr>
          <td>Sedang</td>
          <td>Sedang</td>
          <td>Sedang</td>
        </tr>
        <tr>
          <td>Sedang</td>
          <td>Rendah</td>
          <td>Rendah</td>
        </tr>
        <tr>
          <td>Rendah</td>
          <td>Tinggi</td>
          <td>Sedang</td>
        </tr>
        <tr>
          <td>Rendah</td>
          <td>Sedang</td>
          <td>Rendah</td>
        </tr>
        <tr>
          <td>Rendah</td>
          <td>Rendah</td>
          <td>Rendah</td>
        </tr>
      </table>
    </div>

    <!-- Bagian 4: Tabel Hasil -->
    <div class="section">
      <h2>Hasil Perhitungan Fuzzy</h2>
      <table id="hasilTable">
        <thead>
          <tr>
            <th>Nama</th>
            <th>NIM</th>
            <th>IPK</th>
            <th>Keaktifan</th>
            <th>Nilai Fuzzy</th>
            <th>Kategori Prestasi</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <script>
      // ==== Bagian 1: Membership Function ====
      function muIPK(ipk) {
        return {
          rendah: ipk <= 2 ? 1 : ipk < 2.75 ? (2.75 - ipk) / 0.75 : 0,
          sedang: ipk <= 2 || ipk >= 3.5 ? 0 : ipk < 2.75 ? (ipk - 2) / 0.75 : (3.5 - ipk) / 0.75,
          tinggi: ipk <= 3 ? 0 : ipk < 3.5 ? (ipk - 3) / 0.5 : 1,
        };
      }

      function muAktif(a) {
        return {
          rendah: a <= 40 ? 1 : a < 60 ? (60 - a) / 20 : 0,
          sedang: a <= 40 || a >= 80 ? 0 : a < 60 ? (a - 40) / 20 : (80 - a) / 20,
          tinggi: a <= 60 ? 0 : a < 80 ? (a - 60) / 20 : 1,
        };
      }

      // ==== Bagian 2: Fuzzy Rules ====
      const rules = [
        { ipk: 'tinggi', aktif: 'tinggi', hasil: 'tinggi' },
        { ipk: 'tinggi', aktif: 'sedang', hasil: 'tinggi' },
        { ipk: 'tinggi', aktif: 'rendah', hasil: 'sedang' },
        { ipk: 'sedang', aktif: 'tinggi', hasil: 'tinggi' },
        { ipk: 'sedang', aktif: 'sedang', hasil: 'sedang' },
        { ipk: 'sedang', aktif: 'rendah', hasil: 'rendah' },
        { ipk: 'rendah', aktif: 'tinggi', hasil: 'sedang' },
        { ipk: 'rendah', aktif: 'sedang', hasil: 'rendah' },
        { ipk: 'rendah', aktif: 'rendah', hasil: 'rendah' },
      ];

      // ==== Bagian 3: Fuzzy Inference ====
      function hitungFuzzy(ipk, aktif) {
        const µipk = muIPK(ipk);
        const µaktif = muAktif(aktif);

        let α = { rendah: 0, sedang: 0, tinggi: 0 };

        for (const rule of rules) {
          const fire = Math.min(µipk[rule.ipk], µaktif[rule.aktif]);
          α[rule.hasil] = Math.max(α[rule.hasil], fire);
        }

        // ==== Bagian 4: Defuzzifikasi (Weighted Average) ====
        const z = { rendah: 30, sedang: 60, tinggi: 90 };
        const numerator = α.rendah * z.rendah + α.sedang * z.sedang + α.tinggi * z.tinggi;
        const denominator = α.rendah + α.sedang + α.tinggi;
        const hasil = numerator / denominator;

        let kategori = hasil < 60 ? 'Rendah' : hasil < 80 ? 'Sedang' : 'Tinggi';

        return { hasil: hasil.toFixed(2), kategori };
      }

      // ==== Bagian 5: Tampilkan hasil ====
      function prosesFuzzy() {
        const nama = document.getElementById('nama').value;
        const nim = document.getElementById('nim').value;
        const ipk = parseFloat(document.getElementById('ipk').value);
        const aktif = parseFloat(document.getElementById('aktif').value);

        if (!nama || !nim || isNaN(ipk) || isNaN(aktif)) {
          alert('Mohon isi semua data dengan benar!');
          return;
        }

        const hasil = hitungFuzzy(ipk, aktif);
        const table = document.querySelector('#hasilTable tbody');

        const row = `
      <tr>
        <td>${nama}</td>
        <td>${nim}</td>
        <td>${ipk}</td>
        <td>${aktif}</td>
        <td>${hasil.hasil}</td>
        <td>${hasil.kategori}</td>
      </tr>
    `;
        table.insertAdjacentHTML('beforeend', row);
      }
    </script>
  </body>
</html>
